define ("local_quizadditionalbehaviour/custom_grading",["jquery","core/yui","core/notification","core/ajax","core/str"],function(a,b,c,d,e){var f=function(b){var f=a(b).attr("data-attempt"),g=a(b).attr("data-slot");a(b).find("#submitbutton").attr("disabled",!1);var h="",i="",j="";a(b).find("form").serializeArray().forEach(function(a){if(a.name.endsWith("-comment")){h=a.value}if(a.name.endsWith("-commentformat")){i=a.value}if(a.name.endsWith("-mark")){j=a.value}});d.call([{methodname:"local_quizadditionalbehaviour_set_custom_grading",args:{slot:g,attemptid:f,comment:h,commentformat:i,grade:j},done:function done(h){if("error"==h.result){e.get_string("customgradingerror","local_quizadditionalbehaviour").then(function(c){a(b).find("[data-region='errormessagebox']").html(c)})}else{d.call([{methodname:"local_quizadditionalbehaviour_get_custom_grading",args:{slot:g,attemptid:f},done:function done(c){a(b).find("[data-region='errormessagebox']").html("");a(b).find("#showbutton").click();a(b).find("[data-region='commentbox']").html(c.comment);a(b).find("#submitbutton").removeAttr("disabled");a(".que#q ".concat(g," .info .state")).html(c.statestring);a(".que#q ".concat(g," .info .grade")).html(c.grade);a(".path-mod-quiz #mod_quiz_navblock #quiznavbutton ".concat(g)).attr("class",c.stateclass);a(".path-mod-quiz #mod_quiz_navblock #quiznavbutton ".concat(g)).attr("title",c.statestring);a("table.quizreviewsummary th:contains('Marks')").next().html(c.summarymark);a("table.quizreviewsummary th:contains('Grade')").next().html(c.summarygrade)},fail:c.exception}])}},fail:c.exception}])},g=function(b){this._regionSelector=b;this._region=a(b);a(b).find("form").submit(function(){f(b)});a(b).find("#submitbutton").on("click",function(){f(b)})};g.prototype._regionSelector=null;g.prototype._region=null;return g});
//# sourceMappingURL=custom_grading.min.js.map
